
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!DOCTYPE html>

<html lang="en">
<head id="Head1" runat="server">
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false&amp;libraries=places"></script>

<style>
   
   body
   {
       padding:10px;
   }
   
   .btn-group
   {
       padding:23px;
   }
  
  .container
  {
      
      margin:10px;
      padding:10px;
  }
  
  .googlemaps
  {
       width:70%;
       height:300px;
  }
  

</style>

</head>
<body>

 <nav class="navbar  navbar-fixed-top navbar-inverse" id="my-navbar">
       <div class="container">
         <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">

               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
               <span class="icon-bar"></span>
             </button>
              <a href="" class="navbar-brand">cs5610</a>
          </div>

          
            <div class="collapse navbar-collapse" id="navbar-collapse">
                <a href="../Experiments.aspx" class="btn btn-info navbar-btn navbar-right">Experiments</a>
                <ul class=" nav navbar-nav">

                <li class="active"><a href="../Default.aspx">Home</a></li>

                
              
                </ul>
            </div>
       </div>
  </nav>

   <div class="jumbotron">
      <div class="container text-center center-block">
        <h1>CSS Google Maps Locator</h1>
      </div>
   </div>
 
 <div class="container">
  <form action="javascript:void(0);" name="form1" id="form1">
    <input type="text" name="location" width="350" class="textbox" id="location" value="" />
    <input type="submit" value="Submit" class="submit" />
  </form>
<div class="container googlemaps" id="map-canvas"></div>
 </div>

 <div class="summary">
    <div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">About this Experiment</h3>
  </div>
  <div class="panel-body">
    <pre>
  first we declare our variables; the input field, form and a variable ‘place’ to hold our returned values from Places Autocomplete.
  An ‘autocomplete’ variable is also created to hold the API values of the returned location.
  An event listener is setup as a Google Maps event to detect when a new Place is selected, based on the input field.
   console.log will let you see the output of this object in your browser’s JavaScript console, allowing you to drill
    down to see each parameter within the object. To access the longitude and latitude values for example, we can use place.geometry.location.lat() 
    and place.geometry.location.lng().A listener is also added to the form to detect when the form is submitted. This then updates the marker and center 
    of the Google Map based on the selected location’s longitude and latitude values.
The Google Map itself is setup on load through the initialize() function, using the longitude and latitude.  
    </pre>
  </div>
</div>
 </div>


 <div class="summary">
    <div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Javascript</h3>
  </div>
  <div class="panel-body">
  <pre>
 //Autocomplete variables
    var input = document.getElementById('location');
    var searchform = document.getElementById('form1');
    var place;
    var autocomplete = new google.maps.places.Autocomplete(input);

    //Google Map variables
    var map;
    var marker;

    //Add listener to detect autocomplete selection
    google.maps.event.addListener(autocomplete, 'place_changed', function () {
        place = autocomplete.getPlace();
        //console.log(place);
    });

    //Add listener to search
    searchform.addEventListener("submit", function () {
        var newlatlong = new google.maps.LatLng(place.geometry.location.lat(), place.geometry.location.lng());
        map.setCenter(newlatlong);
        marker.setPosition(newlatlong);
        map.setZoom(12);

    });

    //Reset the inpout box on click
    input.addEventListener('click', function () {
        input.value = "";
    });



    function initialize() {
        var myLatlng = new google.maps.LatLng(42.334450800000006, -71.1018172);
        var mapOptions = {
            zoom: 1,
            center: myLatlng
        }
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: 'Main map'
        });
    }

    google.maps.event.addDomListener(window, 'load', initialize);
</pre>
  </div>
</div>
 </div>

 
 <div class="source">
        <div class="btn-group">
              <a href="../fileview/Default.aspx?~/Week2/Experiment3.html" class="btn btn-primary">View Source</a>     
        <div>
  </div>

<script type="text/javascript">
    //Autocomplete variables
    var input = document.getElementById('location');
    var searchform = document.getElementById('form1');
    var place;
    var autocomplete = new google.maps.places.Autocomplete(input);

    //Google Map variables
    var map;
    var marker;

    //Add listener to detect autocomplete selection
    google.maps.event.addListener(autocomplete, 'place_changed', function () {
        place = autocomplete.getPlace();
        //console.log(place);
    });

    //Add listener to search
    searchform.addEventListener("submit", function () {
        var newlatlong = new google.maps.LatLng(place.geometry.location.lat(), place.geometry.location.lng());
        map.setCenter(newlatlong);
        marker.setPosition(newlatlong);
        map.setZoom(12);

    });

    //Reset the inpout box on click
    input.addEventListener('click', function () {
        input.value = "";
    });



    function initialize() {
        var myLatlng = new google.maps.LatLng(42.334450800000006, -71.1018172);
        var mapOptions = {
            zoom: 1,
            center: myLatlng
        }
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: 'Main map'
        });
    }

    google.maps.event.addDomListener(window, 'load', initialize);
 
</script>

</body>
</html>

